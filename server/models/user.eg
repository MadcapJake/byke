
require:
   checkit
   ../../config/db

provide:
   User, Users

User = db.Model.extend with {
   table-name = .users

   rules = {
      email = { .required, .email }
      name  = { .required, .alpha-underscore}
   }

   initialize = -> this.on .saving: this.validate-save

   validate-save = -> checkit(this.rules).validate with this.attributes
}

Users = db.Collection.extend with { model = User }

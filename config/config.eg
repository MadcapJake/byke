env = './env/{process.env.NODE_ENV}'
require:
   fs
   lodash as ld
   ^env as current
   ./env/all
   ./env/local

collect-configs = -> ld.merge(ld.assign(all, current), local)

module.exports = collect-configs()

provide: test, dev, prod, sec
predicate! test = env-str -> env-str == "test"
predicate! dev  = env-str -> env-str == "development"
predicate! prod = env-str -> env-str == "production"
predicate! sec  = env-str -> env-str == "secure"
